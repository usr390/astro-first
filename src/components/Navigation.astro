---
import { navItems, navLabels } from "../site/mapstourbuses.nav";

const pathname = Astro.url.pathname;

// Detect language
const isSpanish = pathname === "/es" || pathname.startsWith("/es/");
const lang = isSpanish ? "es" : "en";

// Build target paths
const englishPath = isSpanish
  ? pathname.replace(/^\/es/, "") || "/"
  : pathname;

const spanishPath = isSpanish
  ? pathname
  : pathname === "/"
    ? "/es"
    : `/es${pathname}`;

const labels = navLabels[lang];
---

<div id="main-menu" class="nav-links">
  {navItems.map((item) => {
    const href = isSpanish
      ? item.path === "/" ? "/es/" : `/es${item.path}`
      : item.path;

    return (
      <a href={href}>
        {labels[item.key as keyof typeof labels]}
      </a>
    );
  })}

  <a href={isSpanish ? englishPath : spanishPath}>
    {labels.switch}
  </a>
</div>